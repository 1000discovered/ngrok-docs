"use strict";(self.webpackChunkngrok_doc=self.webpackChunkngrok_doc||[]).push([[86415],{5567:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>p,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var a=n(51163),o=(n(59496),n(49613));const r={description:"Use Auth0 OIDC to secure access to ngrok tunnels"},i="Auth0 SSO (OpenID Connect)",l={unversionedId:"integrations/auth0/sso-oidc",id:"integrations/auth0/sso-oidc",title:"Auth0 SSO (OpenID Connect)",description:"Use Auth0 OIDC to secure access to ngrok tunnels",source:"@site/docs/integrations/auth0/sso-oidc.md",sourceDirName:"integrations/auth0",slug:"/integrations/auth0/sso-oidc",permalink:"/docs/integrations/auth0/sso-oidc",draft:!1,editUrl:"https://github.com/ngrok/ngrok-docs/edit/main/docs/integrations/auth0/sso-oidc.md",tags:[],version:"current",lastUpdatedBy:"Russ Savage",lastUpdatedAt:1693002758,formattedLastUpdatedAt:"Aug 25, 2023",frontMatter:{description:"Use Auth0 OIDC to secure access to ngrok tunnels"},sidebar:"docs",previous:{title:"Auth0",permalink:"/docs/integrations/auth0/"},next:{title:"Autodesk",permalink:"/docs/integrations/autodesk/"}},p={},s=[{value:"Supported Features",id:"supported-features",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Configuration Steps",id:"configuration-steps",level:2},{value:"<strong>Step 1</strong>: Configure Auth0",id:"configure-Auth0",level:2},{value:"Add the ngrok App in Auth0",id:"add-the-ngrok-app-in-auth0",level:3},{value:"Grant access to Auth0 users",id:"grant-access-to-auth0-users",level:3},{value:"<strong>Step 2</strong>: Configure ngrok",id:"configure-ngrok",level:2},{value:"<strong>Option 1</strong>: ngrok CLI",id:"option-1-ngrok-cli",level:3},{value:"<strong>Option 2</strong>: ngrok Edge",id:"option-2-ngrok-edge",level:3},{value:"Step 3: Test the integration",id:"test-sso",level:2}],u={toc:s},k="wrapper";function h(t){let{components:e,...r}=t;return(0,o.kt)(k,(0,a.Z)({},u,r,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"auth0-sso-openid-connect"},"Auth0 SSO (OpenID Connect)"),(0,o.kt)("hr",null),(0,o.kt)("admonition",{title:"TL;DR",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"To secure access to ngrok with Auth0 Single Sign-On using OpenID Connect:"),(0,o.kt)("ol",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#configure-Auth0"},"Configure Auth0 SSO")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#configure-ngrok"},"Configure ngrok")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#test-sso"},"Test access to ngrok with Auth0 SSO")))),(0,o.kt)("p",null,"This article details how to configure Auth0 as the primary Identity Provider for ngrok tunnels.\nBy integrating Auth0 SSO with ngrok, you can:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Restrict access to ngrok tunnels")," only to users authenticated via Auth0"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Use Auth0 security policies and MFA authenticators"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Use Auth0's Dashboard to facilitate access to ngrok apps"),".")),(0,o.kt)("h2",{id:"supported-features"},"Supported Features"),(0,o.kt)("p",null,"The ngrok integration with Auth0 supports:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"SP-Initiated SSO"),": In this mode, users access ngrok edges and tunnels and are redirected to Auth0 for authentication.")),(0,o.kt)("h2",{id:"requirements"},"Requirements"),(0,o.kt)("p",null,"To configure ngrok tunnels with Auth0, you must have:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"an Auth0 account with administrative rights to create apps"),(0,o.kt)("li",{parentName:"ul"},"an ngrok enterprise account with an access token or admin access to configure edges with OpenID Connect.")),(0,o.kt)("h2",{id:"configuration-steps"},"Configuration Steps"),(0,o.kt)("p",null,"To integrate ngrok with Auth0 SSO, you will need to:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Configure Auth0 with the ngrok app"),(0,o.kt)("li",{parentName:"ol"},"Configure ngrok with the SSO settings provided by Auth0")),(0,o.kt)("h2",{id:"configure-Auth0"},(0,o.kt)("strong",{parentName:"h2"},"Step 1"),": Configure Auth0"),(0,o.kt)("h3",{id:"add-the-ngrok-app-in-auth0"},"Add the ngrok App in Auth0"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Access the ",(0,o.kt)("a",{parentName:"p",href:"https://manage.auth0.com/dashboard/"},"Auth0 Dashboard"),", and sign in using your Auth0 account.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the left menu, click ",(0,o.kt)("strong",{parentName:"p"},"Applications"),", click ",(0,o.kt)("strong",{parentName:"p"},"Applications"),", and then click ",(0,o.kt)("strong",{parentName:"p"},"Create Application"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the ",(0,o.kt)("strong",{parentName:"p"},"Create application")," popup, enter ",(0,o.kt)("inlineCode",{parentName:"p"},"ngrok oidc")," in the ",(0,o.kt)("strong",{parentName:"p"},"name")," field, click the ",(0,o.kt)("strong",{parentName:"p"},"Single Page Web Applications")," tile, and then click ",(0,o.kt)("strong",{parentName:"p"},"Create"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the ",(0,o.kt)("strong",{parentName:"p"},"ngrok oidc")," page, click the ",(0,o.kt)("strong",{parentName:"p"},"Settings")," tab and make note of the ",(0,o.kt)("strong",{parentName:"p"},"Domain"),", ",(0,o.kt)("strong",{parentName:"p"},"Client ID"),", and ",(0,o.kt)("strong",{parentName:"p"},"Client Secret")," values.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter ",(0,o.kt)("inlineCode",{parentName:"p"},"https://idp.ngrok.com/oauth2/callback")," in the ",(0,o.kt)("strong",{parentName:"p"},"Allowed Callback URLs")," field, and enter the URL provided by the ngrok agent to expose your application to the internet in the ",(0,o.kt)("strong",{parentName:"p"},"Application Login URI")," field (i.e. ",(0,o.kt)("inlineCode",{parentName:"p"},"https://myexample.ngrok.dev"),").\n",(0,o.kt)("img",{alt:"Auth0 configuration",src:n(76945).Z,width:"1243",height:"643"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Save Changes"),"."))),(0,o.kt)("h3",{id:"grant-access-to-auth0-users"},"Grant access to Auth0 users"),(0,o.kt)("p",null,"Auth0 allows administrators to restrict access to SSO apps \u2014 such as ngrok \u2014 via user group assignments. By default, apps created in Auth0 have no group assignments \u2014 in other words, nobody can use Auth0 SSO to access ngrok until you assign a group to the app."),(0,o.kt)("p",null,"To assign Auth0 groups to the ngrok app:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the ",(0,o.kt)("a",{parentName:"p",href:"https://manage.auth0.com/dashboard/"},"Auth0 Dashboard"),", click ",(0,o.kt)("strong",{parentName:"p"},"User Management")," on the left menu, click ",(0,o.kt)("strong",{parentName:"p"},"Users"),", and then click ",(0,o.kt)("strong",{parentName:"p"},"Create User"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter an email address in the ",(0,o.kt)("strong",{parentName:"p"},"Email")," field, provide a ",(0,o.kt)("strong",{parentName:"p"},"Password"),", and then click ",(0,o.kt)("strong",{parentName:"p"},"Create"),"."))),(0,o.kt)("h2",{id:"configure-ngrok"},(0,o.kt)("strong",{parentName:"h2"},"Step 2"),": Configure ngrok"),(0,o.kt)("p",null,"ngrok can leverage Auth0 SSO in two ways:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"From the ngrok CLI (using the ",(0,o.kt)("inlineCode",{parentName:"li"},"--oidc")," parameter)"),(0,o.kt)("li",{parentName:"ul"},"From the ngrok dashboard")),(0,o.kt)("h3",{id:"option-1-ngrok-cli"},(0,o.kt)("strong",{parentName:"h3"},"Option 1"),": ngrok CLI"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note:")," For this tutorial, we assume you have an app running locally (i.e., on localhost:3000) with the ngrok client installed.")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Launch a terminal")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter the following command to launch an ngrok tunnel with Auth0 SSO:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"ngrok http 3000 --oidc=AUTH0_OAUTH_URL \\\n--oidc-client-id=Auth0_CLIENT_ID \\\n--oidc-client-secret=Auth0_CLIENT_SECRET \\\n")),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Note"),": Replace the following with values:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Auth0_OAUTH_URL: The domain value you copied from Auth0, in the form of an URL (i.e. ",(0,o.kt)("inlineCode",{parentName:"li"},"https://dev-abcd1234.us.auth0.com/"),")."),(0,o.kt)("li",{parentName:"ul"},"Auth0_CLIENT_ID: The client id you copied from Auth0."),(0,o.kt)("li",{parentName:"ul"},"Auth0_CLIENT_SECRET: The client secret you copied from Auth0.")),(0,o.kt)("p",{parentName:"li"},"Alternatively, add the ",(0,o.kt)("inlineCode",{parentName:"p"},"--domain YOUR_DOMAIN")," argument to get your custom URL, replacing ",(0,o.kt)("inlineCode",{parentName:"p"},"YOUR_DOMAIN")," with your URL of preference.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Copy the URL available next to ",(0,o.kt)("strong",{parentName:"p"},"Forwarding")," (for example, ",(0,o.kt)("inlineCode",{parentName:"p"},"https://Auth0-sso-test.ngrok.dev"),").")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Skip to ",(0,o.kt)("strong",{parentName:"p"},"Step 3")))),(0,o.kt)("h3",{id:"option-2-ngrok-edge"},(0,o.kt)("strong",{parentName:"h3"},"Option 2"),": ngrok Edge"),(0,o.kt)("p",null,"To configure an edge with Auth0:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Access the ",(0,o.kt)("a",{parentName:"p",href:"https://dashboard.ngrok.com/"},"ngrok Dashboard")," and sign in using your ngrok account.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the left menu, click ",(0,o.kt)("strong",{parentName:"p"},"Cloud Edge")," and then click ",(0,o.kt)("strong",{parentName:"p"},"Edges"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"If you don't have an edge already set to add Auth0 SSO, create a test edge:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Click ",(0,o.kt)("strong",{parentName:"li"},"+ New Edge"),"."),(0,o.kt)("li",{parentName:"ul"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Create HTTPS Edge"),"."),(0,o.kt)("li",{parentName:"ul"},"Click the ",(0,o.kt)("strong",{parentName:"li"},"pencil icon"),' next to "no description", enter ',(0,o.kt)("inlineCode",{parentName:"li"},"Edge with Auth0 SSO OIDC")," as the edge name, and click ",(0,o.kt)("strong",{parentName:"li"},"Save"),"."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the edge settings menu, click ",(0,o.kt)("strong",{parentName:"p"},"OIDC"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Begin setup")," and enter the following values into the fields:\n",(0,o.kt)("img",{alt:"Auth0 config in ngrok",src:n(18123).Z,width:"1411",height:"668"})),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Issuer URL"),": The domain value you copied from Auth0, in the form of a URL (i.e. ",(0,o.kt)("inlineCode",{parentName:"li"},"https://dev-abcd1234.us.auth0.com/"),")."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Client ID"),": The client id you copied from Auth0."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Client Secret"),": The client secret you copied from Auth0."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Save")," at the top, and then click the left arrow to go back to the ",(0,o.kt)("strong",{parentName:"p"},"Edges")," page.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Launch a tunnel connected to your Auth0 edge:"))),(0,o.kt)("admonition",{title:"Note",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"For this step, we assume you have an app running locally (i.e. on localhost:3000) with the ngrok client installed.")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Start a tunnel"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click the ",(0,o.kt)("strong",{parentName:"p"},"copy icon")," next to the tunnel command.\n",(0,o.kt)("img",{alt:"tunnel config",src:n(5130).Z,width:"474",height:"188"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Launch a tunnel:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Launch a terminal."),(0,o.kt)("li",{parentName:"ul"},"Paste the command but replace ",(0,o.kt)("inlineCode",{parentName:"li"},"http://localhost:80")," with your localhost app address (i.e., ",(0,o.kt)("inlineCode",{parentName:"li"},"http://localhost:3000"),")."),(0,o.kt)("li",{parentName:"ul"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Enter")," and an ngrok tunnel associated with your edge configuration will launch."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"To confirm that the tunnel is connected to your edge:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Return to the ngrok dashboard"),(0,o.kt)("li",{parentName:"ul"},"Close the ",(0,o.kt)("strong",{parentName:"li"},"Start a tunnel")," and the ",(0,o.kt)("strong",{parentName:"li"},"Tunnel group")," tabs"),(0,o.kt)("li",{parentName:"ul"},"Refresh the test edge page. Under traffic, you will see the message ",(0,o.kt)("em",{parentName:"li"},"You have 1 tunnel online. Start additional tunnels to begin load balancing."),(0,o.kt)("img",{alt:"tunnel confirmed",src:n(46226).Z,width:"1662",height:"394"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In the test edge, copy the ",(0,o.kt)("strong",{parentName:"p"},"endpoint URL"),". (You use this URL to test the Auth0 Authentication)\n",(0,o.kt)("img",{alt:"tunnel url",src:n(86143).Z,width:"1152",height:"386"})))),(0,o.kt)("h2",{id:"test-sso"},"Step 3: Test the integration"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In your browser, launch an incognito window.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Access your ngrok tunnel (i.e., ",(0,o.kt)("inlineCode",{parentName:"p"},"https://auth0-sso-test.ngrok.io")," or using the copied endpoint URL).")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You should be prompted to log in with your Auth0 credentials.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"After logging in, you should be able to see your web app."))))}h.isMDXComponent=!0},18123:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/auth0-1-88d601b83266b72b2edfa48891a86838.png"},5130:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/auth0-2-e47d25ef789523cf0d514e12a527e533.png"},46226:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/auth0-3-32c1cd6f4f851d88c953fd6a30bf1d35.png"},86143:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/auth0-4-3dc95fa719615fd5ccc2599cafd9e533.png"},76945:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/ngrok_url_configuration_auth0-b7c4ad1444900d448ecf48bee7c86deb.png"}}]);