"use strict";(self.webpackChunkngrok_doc=self.webpackChunkngrok_doc||[]).push([[42188],{37681:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var a=n(51163),o=(n(59496),n(49613));const l={description:"Use JumpCloud OIDC to secure access to ngrok tunnels"},r="JumpCloud SSO (OpenID Connect)",i={unversionedId:"integrations/jumpcloud/sso-oidc",id:"integrations/jumpcloud/sso-oidc",title:"JumpCloud SSO (OpenID Connect)",description:"Use JumpCloud OIDC to secure access to ngrok tunnels",source:"@site/docs/integrations/jumpcloud/sso-oidc.md",sourceDirName:"integrations/jumpcloud",slug:"/integrations/jumpcloud/sso-oidc",permalink:"/docs/integrations/jumpcloud/sso-oidc",draft:!1,editUrl:"https://github.com/ngrok/ngrok-docs/edit/main/docs/integrations/jumpcloud/sso-oidc.md",tags:[],version:"current",lastUpdatedBy:"Russ Savage",lastUpdatedAt:1693002758,formattedLastUpdatedAt:"Aug 25, 2023",frontMatter:{description:"Use JumpCloud OIDC to secure access to ngrok tunnels"},sidebar:"docs",previous:{title:"JumpCloud",permalink:"/docs/integrations/jumpcloud/"},next:{title:"JumpCloud SSO (SAML)",permalink:"/docs/integrations/jumpcloud/sso-saml"}},p={},u=[{value:"Supported Features",id:"supported-features",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Configuration Steps",id:"configuration-steps",level:2},{value:"<strong>Step 1</strong>: Configure JumpCloud",id:"configure-jumpcloud",level:2},{value:"Add the ngrok App in JumpCloud",id:"add-the-ngrok-app-in-jumpcloud",level:3},{value:"Grant access to JumpCloud users",id:"grant-access-to-jumpcloud-users",level:3},{value:"<strong>Step 2</strong>: Configure ngrok",id:"configure-ngrok",level:2},{value:"<strong>Option 1</strong>: ngrok CLI",id:"option-1-ngrok-cli",level:3},{value:"<strong>Option 2</strong>: ngrok Edge",id:"option-2-ngrok-edge",level:3},{value:"Step 3: Test the integration",id:"test-sso",level:2}],s={toc:u},m="wrapper";function d(t){let{components:e,...l}=t;return(0,o.kt)(m,(0,a.Z)({},s,l,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"jumpcloud-sso-openid-connect"},"JumpCloud SSO (OpenID Connect)"),(0,o.kt)("hr",null),(0,o.kt)("admonition",{title:"TL;DR",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"To secure access to ngrok with JumpCloud Single Sign-On using OpenID Connect:"),(0,o.kt)("ol",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#configure-jumpcloud"},"Configure JumpCloud SSO")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#configure-ngrok"},"Configure ngrok")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#test-sso"},"Test access to ngrok with JumpCloud SSO")))),(0,o.kt)("p",null,"This article details how to configure JumpCloud as the primary Identity Provider for ngrok tunnels.\nBy integrating JumpCloud SSO with ngrok, you can:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Restrict access to ngrok tunnels")," only to users authenticated via JumpCloud"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Use JumpCloud security policies and MFA authenticators"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Use JumpCloud's Dashboard to facilitate access to ngrok apps"),".")),(0,o.kt)("h2",{id:"supported-features"},"Supported Features"),(0,o.kt)("p",null,"The ngrok integration with JumpCloud supports:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"SP-Initiated SSO"),": In this mode, users access ngrok edges and tunnels and are redirected to JumpCloud for authentication.")),(0,o.kt)("h2",{id:"requirements"},"Requirements"),(0,o.kt)("p",null,"To configure ngrok tunnels with JumpCloud, you must have:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"a JumpCloud account with administrative rights to create apps"),(0,o.kt)("li",{parentName:"ul"},"an ",(0,o.kt)("a",{parentName:"li",href:"https://ngrok.com/pricing"},"ngrok Enterprise Account")," with an authtoken or admin access to configure edges with OpenID Connect.")),(0,o.kt)("h2",{id:"configuration-steps"},"Configuration Steps"),(0,o.kt)("p",null,"To integrate ngrok with JumpCloud SSO, you will need to:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Configure JumpCloud with the ngrok app"),(0,o.kt)("li",{parentName:"ol"},"Configure ngrok with the SSO settings provided by JumpCloud")),(0,o.kt)("h2",{id:"configure-jumpcloud"},(0,o.kt)("strong",{parentName:"h2"},"Step 1"),": Configure JumpCloud"),(0,o.kt)("h3",{id:"add-the-ngrok-app-in-jumpcloud"},"Add the ngrok App in JumpCloud"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Access the ",(0,o.kt)("a",{parentName:"p",href:"https://console.jumpcloud.com/"},"JumpCloud Console"),", and sign in using your JumpCloud administrator account.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the left menu, click ",(0,o.kt)("strong",{parentName:"p"},"SSO"),", click ",(0,o.kt)("strong",{parentName:"p"},"Get Started")," or ",(0,o.kt)("strong",{parentName:"p"},"+ Add New Application"),", and then click ",(0,o.kt)("strong",{parentName:"p"},"Custom OIDC App"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the ",(0,o.kt)("strong",{parentName:"p"},"New Application")," popup, enter ",(0,o.kt)("inlineCode",{parentName:"p"},"ngrok oidc")," in the ",(0,o.kt)("strong",{parentName:"p"},"Display Label")," field.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click the ",(0,o.kt)("strong",{parentName:"p"},"SSO")," tab, enter ",(0,o.kt)("inlineCode",{parentName:"p"},"https://idp.ngrok.com/oauth2/callback")," in the ",(0,o.kt)("strong",{parentName:"p"},"Redirect URIs")," field, select ",(0,o.kt)("strong",{parentName:"p"},"Client Secret Basic")," as the ",(0,o.kt)("strong",{parentName:"p"},"Client Authentication Type"),", and enter the URL provided by the ngrok agent to expose your application to the internet in the ",(0,o.kt)("strong",{parentName:"p"},"Login URL")," (i.e. ",(0,o.kt)("inlineCode",{parentName:"p"},"https://myexample.ngrok.dev"),").\n",(0,o.kt)("img",{alt:"JumpCloud configuration",src:n(71835).Z,width:"888",height:"509"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Activate"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the ",(0,o.kt)("strong",{parentName:"p"},"Application Saved")," popup, copy the value of both the ",(0,o.kt)("strong",{parentName:"p"},"Client ID")," and the ",(0,o.kt)("strong",{parentName:"p"},"Client Secret")," fields, and then click ",(0,o.kt)("strong",{parentName:"p"},"Got It"),"."))),(0,o.kt)("h3",{id:"grant-access-to-jumpcloud-users"},"Grant access to JumpCloud users"),(0,o.kt)("p",null,"JumpCloud allows administrators to restrict access to SSO apps \u2014 such as ngrok \u2014 via user group assignments. By default, apps created in JumpCloud have no group assignments \u2014 in other words, nobody can use JumpCloud SSO to access ngrok until you assign a group to the app."),(0,o.kt)("p",null,"To assign JumpCloud groups to the ngrok app:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the left menu of the ",(0,o.kt)("a",{parentName:"p",href:"https://console.jumpcloud.com/"},"JumpCloud Console"),", click ",(0,o.kt)("strong",{parentName:"p"},"SOO")," and click the ngrok custom OIDC app you created.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the app popup, click the ",(0,o.kt)("strong",{parentName:"p"},"User Groups")," tab, click the checkbox of the ",(0,o.kt)("strong",{parentName:"p"},"All Users")," group, and then click ",(0,o.kt)("strong",{parentName:"p"},"Save"),".\n",(0,o.kt)("strong",{parentName:"p"},"Tip"),": Make sure to add JumpCloud users to this group when you create or manage users that need access to the ngrok app."))),(0,o.kt)("h2",{id:"configure-ngrok"},(0,o.kt)("strong",{parentName:"h2"},"Step 2"),": Configure ngrok"),(0,o.kt)("p",null,"ngrok can leverage JumpCloud SSO in two ways:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"From the ngrok CLI (using the ",(0,o.kt)("inlineCode",{parentName:"li"},"--oidc")," parameter)"),(0,o.kt)("li",{parentName:"ul"},"From the ngrok dashboard")),(0,o.kt)("h3",{id:"option-1-ngrok-cli"},(0,o.kt)("strong",{parentName:"h3"},"Option 1"),": ngrok CLI"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note:")," For this tutorial, we assume you have an app running locally (i.e., on localhost:3000) with the ngrok client installed.")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Launch a terminal")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter the following command to launch an ngrok tunnel with JumpCloud SSO:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"ngrok http 3000 --oidc=JUMPCLOUD_OAUTH_URL \\\n--oidc-client-id=JUMPCLOUD_CLIENT_ID \\\n--oidc-client-secret=JUMPCLOUD_CLIENT_SECRET \\\n")),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Note"),": Replace the following with values:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"JUMPCLOUD_OAUTH_URL: Your JumpCloud OIDC base URL (i.e. ",(0,o.kt)("inlineCode",{parentName:"li"},"https://oauth.id.jumpcloud.com/"),")."),(0,o.kt)("li",{parentName:"ul"},"JUMPCLOUD_CLIENT_ID: The client id you copied from JumpCloud."),(0,o.kt)("li",{parentName:"ul"},"JUMPCLOUD_CLIENT_SECRET: The client secret you copied from JumpCloud.")),(0,o.kt)("p",{parentName:"li"},"Alternatively, add the ",(0,o.kt)("inlineCode",{parentName:"p"},"--domain YOUR_DOMAIN")," argument to get your custom URL, replacing ",(0,o.kt)("inlineCode",{parentName:"p"},"YOUR_DOMAIN")," with your URL of preference.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Copy the URL available next to ",(0,o.kt)("strong",{parentName:"p"},"Forwarding")," (for example, ",(0,o.kt)("inlineCode",{parentName:"p"},"https://jumpcloud-sso-test.ngrok.dev"),").")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Skip to ",(0,o.kt)("strong",{parentName:"p"},"Step 3")))),(0,o.kt)("h3",{id:"option-2-ngrok-edge"},(0,o.kt)("strong",{parentName:"h3"},"Option 2"),": ngrok Edge"),(0,o.kt)("p",null,"To configure an edge with JumpCloud:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Access the ",(0,o.kt)("a",{parentName:"p",href:"https://dashboard.ngrok.com/"},"ngrok Dashboard")," and sign in using your ngrok account.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the left menu, click ",(0,o.kt)("strong",{parentName:"p"},"Cloud Edge")," and then click ",(0,o.kt)("strong",{parentName:"p"},"Edges"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"If you don't have an edge already set to add JumpCloud SSO, create a test edge:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Click ",(0,o.kt)("strong",{parentName:"li"},"+ New Edge"),"."),(0,o.kt)("li",{parentName:"ul"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Create HTTPS Edge"),"."),(0,o.kt)("li",{parentName:"ul"},"Click the ",(0,o.kt)("strong",{parentName:"li"},"pencil icon"),' next to "no description", enter ',(0,o.kt)("inlineCode",{parentName:"li"},"Edge with JumpCloud SSO OIDC")," as the edge name and click ",(0,o.kt)("strong",{parentName:"li"},"Save"),"."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the edge settings menu, click ",(0,o.kt)("strong",{parentName:"p"},"OIDC"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Begin setup")," and enter the following values into the fields:\n",(0,o.kt)("img",{alt:"JumpCloud config in ngrok",src:n(85095).Z,width:"1426",height:"681"})),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Issuer URL"),": Your JumpCloud OIDC base URL (i.e. ",(0,o.kt)("inlineCode",{parentName:"li"},"https://oauth.id.jumpcloud.com/"),")."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Client ID"),": The client id you copied from JumpCloud."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Client Secret"),": The client secret you copied from JumpCloud."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Save")," at the top, and then click the left arrow to go back to the ",(0,o.kt)("strong",{parentName:"p"},"Edges")," page.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Launch a tunnel connected to your JumpCloud edge:"))),(0,o.kt)("admonition",{title:"Note",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"For this step, we assume you have an app running locally (i.e. on localhost:3000) with the ngrok client installed.")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Start a tunnel"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click the ",(0,o.kt)("strong",{parentName:"p"},"copy icon")," next to the tunnel command.\n",(0,o.kt)("img",{alt:"tunnel config",src:n(95529).Z,width:"474",height:"188"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Launch a tunnel:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Launch a terminal."),(0,o.kt)("li",{parentName:"ul"},"Paste the command but replace ",(0,o.kt)("inlineCode",{parentName:"li"},"http://localhost:80")," with your localhost app address (i.e., ",(0,o.kt)("inlineCode",{parentName:"li"},"http://localhost:3000"),")."),(0,o.kt)("li",{parentName:"ul"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Enter")," and an ngrok tunnel associated with your edge configuration will launch."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"To confirm that the tunnel is connected to your edge:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Return to the ngrok dashboard"),(0,o.kt)("li",{parentName:"ul"},"Close the ",(0,o.kt)("strong",{parentName:"li"},"Start a tunnel")," and the ",(0,o.kt)("strong",{parentName:"li"},"Tunnel group")," tabs"),(0,o.kt)("li",{parentName:"ul"},"Refresh the test edge page. Under traffic, You will see the message ",(0,o.kt)("em",{parentName:"li"},"You have 1 tunnel online. Start additional tunnels to begin load balancing."),(0,o.kt)("img",{alt:"tunnel confirmed",src:n(49094).Z,width:"1662",height:"394"})))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In the test edge, copy the ",(0,o.kt)("strong",{parentName:"p"},"endpoint URL"),". (You use this URL to test the JumpCloud Authentication)\n",(0,o.kt)("img",{alt:"tunnel url",src:n(90005).Z,width:"1110",height:"469"})))),(0,o.kt)("h2",{id:"test-sso"},"Step 3: Test the integration"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In your browser, launch an incognito window.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Access your ngrok tunnel (i.e., ",(0,o.kt)("inlineCode",{parentName:"p"},"https://jumpcloud-sso-test.ngrok.io")," or using the copied endpoint URL).")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"You should be prompted to log in with your JumpCloud credentials.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"After logging in, you should be able to see your web app."))))}d.isMDXComponent=!0},85095:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/jumpcloud-1-40d5cfa0932ad21f4f74c15c613db06a.png"},95529:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/jumpcloud-2-e47d25ef789523cf0d514e12a527e533.png"},49094:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/jumpcloud-3-32c1cd6f4f851d88c953fd6a30bf1d35.png"},90005:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/jumpcloud-4-82fc96420fdd647bdbb4808d23998693.png"},71835:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/ngrok_url_configuration_jumpcloud-0b62856e8096d360992a49615d5991ac.png"}}]);