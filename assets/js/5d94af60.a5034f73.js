"use strict";(self.webpackChunkngrok_doc=self.webpackChunkngrok_doc||[]).push([[58110],{49564:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>p});var a=o(51163),n=(o(59496),o(49613));const i={description:"Authenticate users with Google OAuth"},l="Google",r={unversionedId:"integrations/google/oauth",id:"integrations/google/oauth",title:"Google",description:"Authenticate users with Google OAuth",source:"@site/docs/integrations/google/oauth.mdx",sourceDirName:"integrations/google",slug:"/integrations/google/oauth",permalink:"/docs/integrations/google/oauth",draft:!1,editUrl:"https://github.com/ngrok/ngrok-docs/edit/main/docs/integrations/google/oauth.mdx",tags:[],version:"current",lastUpdatedBy:"Alan Shreve",lastUpdatedAt:1693163609,formattedLastUpdatedAt:"Aug 27, 2023",frontMatter:{description:"Authenticate users with Google OAuth"},sidebar:"docs",previous:{title:"Amazon",permalink:"/docs/integrations/google/"},next:{title:"Google Kubernetes Engine (GKE)",permalink:"/docs/integrations/google-gke/"}},s={},p=[{value:"Creating a custom Google OAuth application",id:"creating-a-custom-google-oauth-application",level:2},{value:"Build the consent screen",id:"build-the-consent-screen",level:3},{value:"Create credentials for ngrok",id:"create-credentials-for-ngrok",level:3},{value:"Update your endpoint configuration",id:"update-your-endpoint-configuration",level:3},{value:"Additional application setup information",id:"additional-application-setup-information",level:3}],c={toc:p},d="wrapper";function u(e){let{components:t,...i}=e;return(0,n.kt)(d,(0,a.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"google"},"Google"),(0,n.kt)("hr",null),(0,n.kt)("h2",{id:"creating-a-custom-google-oauth-application"},"Creating a custom Google OAuth application"),(0,n.kt)("p",null,"Step-by-step instructions below follow Google's documentation on ",(0,n.kt)("a",{parentName:"p",href:"https://support.google.com/cloud/answer/6158849?hl=en"},"setting up OAuth 2.0")," for a web application."),(0,n.kt)("h3",{id:"build-the-consent-screen"},"Build the consent screen"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Create or select a project on the ",(0,n.kt)("a",{parentName:"li",href:"https://console.cloud.google.com"},"Google Cloud Platform Console"),"."),(0,n.kt)("li",{parentName:"ol"},"Navigate to the project's ",(0,n.kt)("a",{parentName:"li",href:"https://console.developers.google.com/apis/credentials/consent"},"OAuth consent screen"),"."),(0,n.kt)("li",{parentName:"ol"},"Select whether your application is an ",(0,n.kt)("a",{parentName:"li",href:"https://support.google.com/cloud/answer/6158849?hl=en#public-and-internal"},"internal or external app"),"."),(0,n.kt)("li",{parentName:"ol"},"Fill out the application name and support email."),(0,n.kt)("li",{parentName:"ol"},"Add additional scopes required by your application, saving the full scope URI for later.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://developers.google.com/identity/protocols/oauth2/scopes"},"Possible scope URIs"),"\n."))),(0,n.kt)("li",{parentName:"ol"},"Ensure that the ",(0,n.kt)("inlineCode",{parentName:"li"},"email")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"profile")," scopes are still selected."),(0,n.kt)("li",{parentName:"ol"},"Under Authorized domains, add ",(0,n.kt)("inlineCode",{parentName:"li"},"ngrok.com")," and your application homepage domain."),(0,n.kt)("li",{parentName:"ol"},"Add links to your application homepage and privacy policy. The final consent screen should resemble: ",(0,n.kt)("a",{target:"_blank",href:o(21252).Z},(0,n.kt)("img",{src:o(82492).Z,width:"738",height:"1079"}))),(0,n.kt)("li",{parentName:"ol"},"Save the application.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Applications that require verification cannot complete the consent screen and are not supported by ngrok.")))),(0,n.kt)("h3",{id:"create-credentials-for-ngrok"},"Create credentials for ngrok"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Navigate to ",(0,n.kt)("a",{parentName:"li",href:"https://console.cloud.google.com/apis/credentials"},"Credentials")," for your project."),(0,n.kt)("li",{parentName:"ol"},'Select "Create credentials" from the top menu and select "OAuth Client ID".'),(0,n.kt)("li",{parentName:"ol"},'Choose "Web application" from the list of application types.'),(0,n.kt)("li",{parentName:"ol"},'Name your secret, then set "Authorized Redirect URIs" to ',(0,n.kt)("inlineCode",{parentName:"li"},"https://idp.ngrok.com/oauth2/callback"),". The final credentials form should resemble: ",(0,n.kt)("a",{target:"_blank",href:o(76182).Z},(0,n.kt)("img",{src:o(76397).Z,width:"640",height:"755"}))),(0,n.kt)("li",{parentName:"ol"},"Securely store the client ID and secret from the final screen: ",(0,n.kt)("a",{target:"_blank",href:o(55828).Z},(0,n.kt)("img",{src:o(26263).Z,width:"593",height:"558"})))),(0,n.kt)("h3",{id:"update-your-endpoint-configuration"},"Update your endpoint configuration"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Return to the ngrok dashboard and create or edit an OAuth endpoint configuration module for your edge."),(0,n.kt)("li",{parentName:"ol"},"Choose to use your own application with Google as the provider."),(0,n.kt)("li",{parentName:"ol"},"Include the client ID, secret, and scopes configured in your application."),(0,n.kt)("li",{parentName:"ol"},"Add the following scopes to your application if they are not already present:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"https://www.googleapis.com/auth/userinfo.profile")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"https://www.googleapis.com/auth/userinfo.email"))))),(0,n.kt)("h3",{id:"additional-application-setup-information"},"Additional application setup information"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://developers.google.com/identity/protocols/oauth2/web-server"},"Google OAuth 2.0 Web Server")," (prerequisite steps)"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://support.google.com/cloud/answer/6158849?hl=en"},"GCP Help: Setting up OAuth 2.0")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://developers.google.com/identity/protocols/oauth2"},"Google OAuth 2.0 workflow"))))}u.isMDXComponent=!0},21252:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/files/1-google-consent_screen_complete-392831c13f4b0aa5c38bc1d09cb5d9ca.png"},76182:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/files/2-google-create_client_id-8df17c7b42080fc7d65b474f7c601423.png"},55828:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/files/3-google-client_id_and_secret-3652596e3b3c75b12fa8cfefea764144.png"},82492:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/1-google-consent_screen_complete-392831c13f4b0aa5c38bc1d09cb5d9ca.png"},76397:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/2-google-create_client_id-8df17c7b42080fc7d65b474f7c601423.png"},26263:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/3-google-client_id_and_secret-3652596e3b3c75b12fa8cfefea764144.png"}}]);