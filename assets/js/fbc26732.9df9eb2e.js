"use strict";(self.webpackChunkngrok_doc=self.webpackChunkngrok_doc||[]).push([[214],{59100:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var n=a(51163),i=(a(59496),a(49613));const r={description:"Authenticate users via GitHub OAuth"},o="GitHub OAuth",s={unversionedId:"integrations/github/oauth",id:"integrations/github/oauth",title:"GitHub OAuth",description:"Authenticate users via GitHub OAuth",source:"@site/docs/integrations/github/oauth.mdx",sourceDirName:"integrations/github",slug:"/integrations/github/oauth",permalink:"/docs/integrations/github/oauth",draft:!1,editUrl:"https://github.com/ngrok/ngrok-docs/edit/main/docs/integrations/github/oauth.mdx",tags:[],version:"current",lastUpdatedBy:"Alan Shreve",lastUpdatedAt:1693163609,formattedLastUpdatedAt:"Aug 27, 2023",frontMatter:{description:"Authenticate users via GitHub OAuth"},sidebar:"docs",previous:{title:"GitHub",permalink:"/docs/integrations/github/"},next:{title:"GitHub Repository Webhooks",permalink:"/docs/integrations/github/webhooks"}},l={},d=[{value:"Creating a custom GitHub OAuth application",id:"creating-a-custom-github-oauth-application",level:2},{value:"Additional GitHub headers provided by ngrok",id:"additional-github-headers-provided-by-ngrok",level:2},{value:"Using Organization and Teams",id:"using-organization-and-teams",level:2},{value:"Header presence and constraint ordering",id:"header-presence-and-constraint-ordering",level:2}],u={toc:d},p="wrapper";function h(e){let{components:t,...r}=e;return(0,i.kt)(p,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"github-oauth"},"GitHub OAuth"),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"creating-a-custom-github-oauth-application"},"Creating a custom GitHub OAuth application"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Follow ",(0,i.kt)("a",{parentName:"li",href:"https://developer.github.com/apps/building-oauth-apps/creating-an-oauth-app/"},"GitHub's documentation")," until the final step of submitting the registration form."),(0,i.kt)("li",{parentName:"ol"},"Set the Authorization callback URL to ",(0,i.kt)("inlineCode",{parentName:"li"},"https://idp.ngrok.com/oauth2/callback"),"."),(0,i.kt)("li",{parentName:"ol"},"Submit the form. A working example registration: ",(0,i.kt)("a",{target:"_blank",href:a(20750).Z},(0,i.kt)("img",{src:a(55902).Z,width:"521",height:"562"}))),(0,i.kt)("li",{parentName:"ol"},"Save the client ID and client secret from the application overview: ",(0,i.kt)("a",{target:"_blank",href:a(9446).Z},(0,i.kt)("img",{src:a(8204).Z,width:"761",height:"948"}))),(0,i.kt)("li",{parentName:"ol"},"Return to the ngrok dashboard and create or edit an OAuth endpoint configuration module."),(0,i.kt)("li",{parentName:"ol"},"Choose to use your own application with GitHub as the provider."),(0,i.kt)("li",{parentName:"ol"},"Include the client ID and secret from earlier."),(0,i.kt)("li",{parentName:"ol"},"Add any scopes your application requires.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Include the ",(0,i.kt)("inlineCode",{parentName:"li"},"read:user")," scope (or more permissive, like ",(0,i.kt)("inlineCode",{parentName:"li"},"user"),") for ngrok."))),(0,i.kt)("li",{parentName:"ol"},"Add any team or organization constraints by the their mention handle(s), excluding the ",(0,i.kt)("inlineCode",{parentName:"li"},"@")," prefix.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"For example, the ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/ngrok"},"ngrok")," organization's mention handle is ",(0,i.kt)("inlineCode",{parentName:"li"},"@ngrok"),", so the organization constraint would be ",(0,i.kt)("inlineCode",{parentName:"li"},"ngrok"),". Similarly, the ",(0,i.kt)("inlineCode",{parentName:"li"},"@ngrok/developers")," team would be matched by the constraint ",(0,i.kt)("inlineCode",{parentName:"li"},"ngrok/developers"),"."),(0,i.kt)("li",{parentName:"ul"},"If a constraint is specified, the ",(0,i.kt)("inlineCode",{parentName:"li"},"read:org")," scope is required. A more permissive scope, such as ",(0,i.kt)("inlineCode",{parentName:"li"},"org"),", also works."),(0,i.kt)("li",{parentName:"ul"},"Organizations must allow ",(0,i.kt)("a",{parentName:"li",href:"#using-organization-and-teams"},"third-party access")," to your app.")))),(0,i.kt)("h2",{id:"additional-github-headers-provided-by-ngrok"},"Additional GitHub headers provided by ngrok"),(0,i.kt)("p",null,"In addition to the headers set for every OAuth provider, these additional headers are available when using GitHub."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ngrok-auth-github-user-id")),(0,i.kt)("p",null,"The username of the authorized user."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ngrok-auth-github-organization")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Only when a team or organization constraint matches:")," the ",(0,i.kt)("a",{parentName:"p",href:"#header-presence-and-constraint-ordering"},"first matching"),' GitHub organization\'s mention handle (e.g "coreutils").'),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ngrok-auth-github-team")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Only when a team constraint matches:")," the ",(0,i.kt)("a",{parentName:"p",href:"#header-presence-and-constraint-ordering"},"first matching"),' GitHub team mention handle (e.g "coreutils/contributors").'),(0,i.kt)("h2",{id:"using-organization-and-teams"},"Using Organization and Teams"),(0,i.kt)("p",null,"To authorize users based on organization or team membership, the organization must allow third party access. There are multiple ways to grant access:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Organizations may allow unrestricted third-party access from settings."),(0,i.kt)("li",{parentName:"ul"},"Owners can grant access to an application during authorization."),(0,i.kt)("li",{parentName:"ul"},"Members can request access as part of authorization."),(0,i.kt)("li",{parentName:"ul"},"Members can ",(0,i.kt)("a",{parentName:"li",href:"https://help.github.com/en/github/setting-up-and-managing-your-github-user-account/requesting-organization-approval-for-oauth-apps"},"request access from settings."))),(0,i.kt)("p",null,"The ngrok managed application can authorize users based on organization or team. ",(0,i.kt)("strong",{parentName:"p"},"For organizations concerned about membership privacy, your own application should always be used"),". When granting third-party access to the managed application, anyone using the managed application may constrain based on your organization's membership."),(0,i.kt)("h2",{id:"header-presence-and-constraint-ordering"},"Header presence and constraint ordering"),(0,i.kt)("p",null,"Organization and team headers are present only when an organization or team constraint matches. For example, an endpoint constrained solely on the ",(0,i.kt)("inlineCode",{parentName:"p"},"ngrok")," organization will always have authorized users with the ",(0,i.kt)("inlineCode",{parentName:"p"},"ngrok")," organization header. An endpoint without any organization or team constraints will receive no organization or team header."),(0,i.kt)("p",null,"ngrok authorizes against users' first 200 memberships of each constraint in chronological order of the team or organization's creation. Headers are filled from the first user data match in order:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"From any team membership, check the parent organization."),(0,i.kt)("li",{parentName:"ol"},"Check team membership."),(0,i.kt)("li",{parentName:"ol"},"Check organization membership.")))}h.isMDXComponent=!0},20750:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/1-github-register-3ddefc8c3ebce305a8891243dd5dcc07.png"},9446:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/2-github-client_id_and_secret-2446d33bee1bb62418802272af93173f.png"},55902:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/1-github-register-3ddefc8c3ebce305a8891243dd5dcc07.png"},8204:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/2-github-client_id_and_secret-2446d33bee1bb62418802272af93173f.png"}}]);