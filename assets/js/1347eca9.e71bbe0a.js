"use strict";(self.webpackChunkngrok_doc=self.webpackChunkngrok_doc||[]).push([[84440],{2601:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=a(51163),o=(a(59496),a(49613));const i={description:"Use Okta SAML to secure access to ngrok tunnels"},r="Okta SSO (SAML)",l={unversionedId:"integrations/okta/sso-saml",id:"integrations/okta/sso-saml",title:"Okta SSO (SAML)",description:"Use Okta SAML to secure access to ngrok tunnels",source:"@site/docs/integrations/okta/sso-saml.md",sourceDirName:"integrations/okta",slug:"/integrations/okta/sso-saml",permalink:"/docs/integrations/okta/sso-saml",draft:!1,editUrl:"https://github.com/ngrok/ngrok-docs/edit/main/docs/integrations/okta/sso-saml.md",tags:[],version:"current",lastUpdatedBy:"Russ Savage",lastUpdatedAt:1693002758,formattedLastUpdatedAt:"Aug 25, 2023",frontMatter:{description:"Use Okta SAML to secure access to ngrok tunnels"},sidebar:"docs",previous:{title:"Okta SSO (OpenID Connect)",permalink:"/docs/integrations/okta/sso-oidc"},next:{title:"Okta Webhooks",permalink:"/docs/integrations/okta/webhooks"}},s={},p=[{value:"Requirements",id:"requirements",level:2},{value:"Configuration Steps",id:"configuration-steps",level:2},{value:"<strong>Step 1</strong>: Configure Okta",id:"configure-okta",level:2},{value:"Add the ngrok App in Okta",id:"add-the-ngrok-app-in-okta",level:3},{value:"Download the IdP metadata",id:"download-the-idp-metadata",level:3},{value:"Grant access to Okta people and groups",id:"grant-access-to-okta-people-and-groups",level:3},{value:"<strong>Step 2</strong>: Configure ngrok",id:"configure-ngrok",level:2},{value:"ngrok Edge",id:"ngrok-edge",level:3},{value:"Step 3: Test the integration",id:"test-sso",level:2}],k={toc:p},g="wrapper";function d(t){let{components:e,...i}=t;return(0,o.kt)(g,(0,n.Z)({},k,i,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"okta-sso-saml"},"Okta SSO (SAML)"),(0,o.kt)("hr",null),(0,o.kt)("admonition",{title:"TL;DR",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"To secure access to ngrok with Okta Single Sign-On using SAML:"),(0,o.kt)("ol",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#configure-okta"},"Configure Okta SSO")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#configure-ngrok"},"Configure ngrok")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"#test-sso"},"Test access to ngrok with Okta SSO")))),(0,o.kt)("p",null,"This article details how to configure Okta as the primary Identity Provider for ngrok tunnels.\nBy integrating Okta SSO with ngrok, you can:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Restrict access to ngrok tunnels")," only to users authenticated via Okta"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Use Okta security policies, MFA authenticators")," \u2014 including Okta Verify, FastPass, and FIDO2 \u2014 ",(0,o.kt)("strong",{parentName:"li"},"and ThreatInsights to control access to ngrok tunnels"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Use Okta's Dashboard to facilitate access to ngrok apps"),".")),(0,o.kt)("h2",{id:"requirements"},"Requirements"),(0,o.kt)("p",null,"To configure ngrok tunnels with Okta, you must have:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"an Okta account with administrative rights to create apps"),(0,o.kt)("li",{parentName:"ul"},"an ",(0,o.kt)("a",{parentName:"li",href:"https://ngrok.com/pricing"},"ngrok Enterprise Account")," with an authtoken or admin access to configure edges with SAML.")),(0,o.kt)("h2",{id:"configuration-steps"},"Configuration Steps"),(0,o.kt)("p",null,"To integrate ngrok with Okta SSO, you will need to:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Configure Okta with the ngrok app"),(0,o.kt)("li",{parentName:"ol"},"Configure ngrok with the SSO settings provided by Okta")),(0,o.kt)("h2",{id:"configure-okta"},(0,o.kt)("strong",{parentName:"h2"},"Step 1"),": Configure Okta"),(0,o.kt)("h3",{id:"add-the-ngrok-app-in-okta"},"Add the ngrok App in Okta"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Access your Okta Dashboard as an administrator and then click ",(0,o.kt)("strong",{parentName:"li"},"Admin"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Application")," > ",(0,o.kt)("strong",{parentName:"li"},"Applications")," ."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Create App Integration"),","),(0,o.kt)("li",{parentName:"ol"},"Select ",(0,o.kt)("em",{parentName:"li"},"SAML 2.0"),", and then click ",(0,o.kt)("strong",{parentName:"li"},"Next"),"."),(0,o.kt)("li",{parentName:"ol"},"Enter the ",(0,o.kt)("strong",{parentName:"li"},"Application label")," \u2014 this is the app name that will be displayed in the okta dashboard for end users \u2014 and click ",(0,o.kt)("strong",{parentName:"li"},"Next"),"."),(0,o.kt)("li",{parentName:"ol"},'Enter in temporary values for "Single sign on URL" and "Audience URI" and select "EmailAddress" for "Name ID format" and then click "Next".',(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Single sign-on URL")," : https://temporary"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Audience URI (SP Entity ID)")," : https://temporary"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Name ID format")," : Email"))),(0,o.kt)("li",{parentName:"ol"},"Select ",(0,o.kt)("strong",{parentName:"li"},"I\u2019m an Okta customer adding an internal app")," and click ",(0,o.kt)("strong",{parentName:"li"},"Finish"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Done"),"."),(0,o.kt)("li",{parentName:"ol"},"Under the ",(0,o.kt)("strong",{parentName:"li"},"Sign On")," tab of the ngrok application, ",(0,o.kt)("strong",{parentName:"li"},"copy the Client ID and Client Secret"),". These values will be used at ngrok to complete the configuration.")),(0,o.kt)("h3",{id:"download-the-idp-metadata"},"Download the IdP metadata"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Navigate to the ",(0,o.kt)("strong",{parentName:"li"},"Sign On")," Tab on the new app and click on ",(0,o.kt)("strong",{parentName:"li"},"Actions")," under the Active SHA-2 certificate and select ",(0,o.kt)("strong",{parentName:"li"},"View IdP metadata"),". The metadata will open in a new tab.\n",(0,o.kt)("img",{alt:"view xml metadata",src:a(9348).Z,width:"2086",height:"704"})),(0,o.kt)("li",{parentName:"ol"},"In the new tab, Select ",(0,o.kt)("strong",{parentName:"li"},"Save As")," from the File menu to save your metadata.xml file for uploading into ngrok in a later step.\n",(0,o.kt)("img",{alt:"download xml",src:a(21538).Z,width:"565",height:"262"}))),(0,o.kt)("h3",{id:"grant-access-to-okta-people-and-groups"},"Grant access to Okta people and groups"),(0,o.kt)("p",null,"Okta allows administrators to restrict access to SSO apps \u2014 such as ngrok \u2014 via assignments. By default, apps created in Okta have no assignments \u2014 in other words, nobody can use Okta SSO to access ngrok until you assign them to the app. To assign Okta users and groups to the ngrok app:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Navigate to the ",(0,o.kt)("strong",{parentName:"li"},"Assignments")," Tab."),(0,o.kt)("li",{parentName:"ol"},"Use the ",(0,o.kt)("strong",{parentName:"li"},"Assign")," button to associate groups and users with the ngrok app. ",(0,o.kt)("strong",{parentName:"li"},"To test the SSO with ngrok, make sure you're assigned to the app"),".")),(0,o.kt)("h2",{id:"configure-ngrok"},(0,o.kt)("strong",{parentName:"h2"},"Step 2"),": Configure ngrok"),(0,o.kt)("h3",{id:"ngrok-edge"},"ngrok Edge"),(0,o.kt)("p",null,"To configure an edge with Okta:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Go to dashboard.ngrok.com.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Cloud Edge")," > ",(0,o.kt)("strong",{parentName:"p"},"Edges"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"If you don't have an edge already set to add Okta SSO, create a test edge:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Click ",(0,o.kt)("strong",{parentName:"li"},"New Edge")),(0,o.kt)("li",{parentName:"ul"},"Click ",(0,o.kt)("strong",{parentName:"li"},"HTTPS Edge")),(0,o.kt)("li",{parentName:"ul"},"Click the ",(0,o.kt)("strong",{parentName:"li"},"pencil icon"),' next to "no description". Enter ',(0,o.kt)("em",{parentName:"li"},"Edge with Okta SSO")," as the edge name and click ",(0,o.kt)("strong",{parentName:"li"},"Save"),"."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the edge settings, click ",(0,o.kt)("strong",{parentName:"p"},"SAML"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Begin setup")," and click on ",(0,o.kt)("strong",{parentName:"p"},"Upload XML")," beside ",(0,o.kt)("strong",{parentName:"p"},"IdP Metadata")," under ",(0,o.kt)("strong",{parentName:"p"},"Identity Provider")," and select your metadata file saved from the steps above:"),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{alt:"Okta config in ngrok",src:a(88379).Z,width:"3648",height:"2398"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Save")," at the top.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"After you save, the SP Metadata will appear. Copy these values into the Okta where temporary values were placed above:\n",(0,o.kt)("img",{alt:"Update Okta with SP values",src:a(10379).Z,width:"3840",height:"2160"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Save the changes in Okta.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Launch a tunnel connected to your Okta edge:"))),(0,o.kt)("admonition",{title:"Note",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"For this step, we assume you have an app running locally (i.e. on localhost:3000) with the ngrok client installed.")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click ",(0,o.kt)("strong",{parentName:"p"},"Start a tunnel"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click the ",(0,o.kt)("strong",{parentName:"p"},"copy icon")," next to the tunnel command."),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{alt:"tunnel config",src:a(1305).Z,width:"1196",height:"540"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Launch a tunnel:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Launch a terminal"),(0,o.kt)("li",{parentName:"ul"},"Paste the command. Replace http://localhost:80 with your local web app addess (i.e., http://localhost:3000)"),(0,o.kt)("li",{parentName:"ul"},"hit ",(0,o.kt)("strong",{parentName:"li"},"Enter"),". an ngrok tunnel associated to your edge configuration is launched."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"To confirm that the tunnel is connected to your edge:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Return to the ngrok dashboard"),(0,o.kt)("li",{parentName:"ul"},"Close the ",(0,o.kt)("strong",{parentName:"li"},"Start a tunnel")," and the ",(0,o.kt)("strong",{parentName:"li"},"Tunnel group")," tabs"),(0,o.kt)("li",{parentName:"ul"},"Refresh the test edge page. Under traffic, You will see the message ",(0,o.kt)("em",{parentName:"li"},"You have 1 tunnel online. Start additional tunnels to begin load balancing"))),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{alt:"tunnel confirmed",src:a(50953).Z,width:"1662",height:"394"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In the test edge, copy the ",(0,o.kt)("strong",{parentName:"p"},"endpoint URL"),". (you will use this url to test the Okta Authentication)\n",(0,o.kt)("img",{alt:"tunnel url",src:a(63893).Z,width:"1606",height:"984"})))),(0,o.kt)("h2",{id:"test-sso"},"Step 3: Test the integration"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"In your browser, launch an incognito window."),(0,o.kt)("li",{parentName:"ol"},"Access your ngrok tunnel (i.e., ",(0,o.kt)("a",{parentName:"li",href:"https://okta-sso-test.ngrok.io"},"https://okta-sso-test.ngrok.io")," or using a copied URL)."),(0,o.kt)("li",{parentName:"ol"},"You should be prompted to log in with your Okta credentials."),(0,o.kt)("li",{parentName:"ol"},"After login, you should be able to see your web app.")))}d.isMDXComponent=!0},1305:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/okta-2-ed10b4a19df44cf581ec4672a69ff90f.png"},50953:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/okta-3-32c1cd6f4f851d88c953fd6a30bf1d35.png"},63893:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/okta-4-926de3d19a422657b759f31dbe8b4f33.png"},88379:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/okta-5-13c13c04a640d0363066df7542409841.png"},10379:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/okta-6-f01b88b73ba9640eac791ff49eb74edf.png"},21538:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/okta-save-as-xml-a8fdee17754ce72a85ea970774f7a27f.png"},9348:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/okta-view-cert-8995607b4d48509e8588b6af9d26d192.png"}}]);