"use strict";(self.webpackChunkngrok_doc=self.webpackChunkngrok_doc||[]).push([[36956],{90109:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var a=n(51163),r=(n(59496),n(49613));const l={sidebar_position:2,title:"Agent Configuration File"},i="ngrok Agent Configuration File",o={unversionedId:"secure-tunnels/ngrok-agent/reference/config",id:"secure-tunnels/ngrok-agent/reference/config",title:"Agent Configuration File",description:"---",source:"@site/docs/secure-tunnels/ngrok-agent/reference/config.md",sourceDirName:"secure-tunnels/ngrok-agent/reference",slug:"/secure-tunnels/ngrok-agent/reference/config",permalink:"/docs/secure-tunnels/ngrok-agent/reference/config",draft:!1,editUrl:"https://github.com/ngrok/ngrok-docs/edit/main/docs/secure-tunnels/ngrok-agent/reference/config.md",tags:[],version:"current",lastUpdatedBy:"Mohamed Osman Ahmed",lastUpdatedAt:1693946290,formattedLastUpdatedAt:"Sep 5, 2023",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Agent Configuration File"},sidebar:"docs",previous:{title:"Reference",permalink:"/docs/secure-tunnels/ngrok-agent/reference/"},next:{title:"Agent CLI",permalink:"/docs/secure-tunnels/ngrok-agent/reference/ngrok"}},d={},p=[{value:"Default Locations",id:"default-locations",level:2},{value:"Global Options",id:"global-options",level:2},{value:"<code>api_key</code>",id:"api_key",level:3},{value:"ngrok.yml specifying an API key",id:"ngrokyml-specifying-an-api-key",level:5},{value:"<code>authtoken</code>",id:"authtoken",level:3},{value:"ngrok.yml specifying an authtoken",id:"ngrokyml-specifying-an-authtoken",level:5},{value:"<code>connect_timeout</code>",id:"connect_timeout",level:3},{value:"<code>console_ui</code>",id:"console_ui",level:3},{value:"<code>console_ui_color</code>",id:"console_ui_color",level:3},{value:"<code>dns_resolver_ips</code>",id:"dns_resolver_ips",level:3},{value:"<code>heartbeat_interval</code>",id:"heartbeat_interval",level:3},{value:"<code>heartbeat_tolerance</code>",id:"heartbeat_tolerance",level:3},{value:"<code>inspect_db_size</code>",id:"inspect_db_size",level:3},{value:"<code>log_level</code>",id:"log_level",level:3},{value:"<code>log_format</code>",id:"log_format",level:3},{value:"<code>log</code>",id:"log",level:3},{value:"<code>metadata</code>",id:"metadata",level:3},{value:"<code>proxy_url</code>",id:"proxy_url",level:3},{value:"<code>region</code>",id:"region",level:3},{value:"<code>remote_management</code>",id:"remote_management",level:3},{value:"<code>root_cas</code>",id:"root_cas",level:3},{value:"<code>server_addr</code>",id:"server_addr",level:3},{value:"<code>tunnels</code>",id:"tunnels",level:3},{value:"<code>update_channel</code>",id:"update_channel",level:3},{value:"<code>update_check</code>",id:"update_check",level:3},{value:"<code>version</code>",id:"version",level:3},{value:"<code>web_addr</code>",id:"web_addr",level:3},{value:"<code>web_allow_hosts</code>",id:"web_allow_hosts",level:3},{value:"Allow an IP address and a Domain as Host headers",id:"allow-an-ip-address-and-a-domain-as-host-headers",level:5},{value:"Tunnel definitions",id:"tunnel-definitions",level:2},{value:"Define two tunnels named &#39;httpbin&#39; and &#39;demo&#39;",id:"define-two-tunnels-named-httpbin-and-demo",level:5},{value:"Start the tunnel named &#39;httpbin&#39;",id:"start-the-tunnel-named-httpbin",level:5},{value:"Common Tunnel Configuration Properties",id:"common-tunnel-configuration-properties",level:5},{value:"HTTP Tunnel Configuration Properties",id:"http-tunnel-configuration-properties",level:5},{value:"TCP Tunnel Configuration Properties",id:"tcp-tunnel-configuration-properties",level:5},{value:"TLS Tunnel Configuration Properties",id:"tls-tunnel-configuration-properties",level:5},{value:"Labeled Tunnel Configuration Properties",id:"labeled-tunnel-configuration-properties",level:5},{value:"Define two labeled tunnels",id:"define-two-labeled-tunnels",level:5},{value:"How Config Files get Merged",id:"how-config-files-get-merged",level:2},{value:"Full Example",id:"full-example",level:2}],s={toc:p},m="wrapper";function u(t){let{components:e,...n}=t;return(0,r.kt)(m,(0,a.Z)({},s,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"ngrok-agent-configuration-file"},"ngrok Agent Configuration File"),(0,r.kt)("hr",null),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"ngrok")," supports an optional, YAML configuration file which provides you with the power to run multiple tunnels simultaneously as well as to tweak some of ngrok's more advanced settings."),(0,r.kt)("h2",{id:"default-locations"},"Default Locations"),(0,r.kt)("p",null,"The default location of the ngrok agent's configuration file varies based on your operating system. The easiest way to find the configuration file location is to run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ngrok config check\n")),(0,r.kt)("p",null,"which will validate and print the location of the configuration file."),(0,r.kt)("p",null,"For the main operating systems we support, their default file locations are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Linux: ",(0,r.kt)("inlineCode",{parentName:"li"},'"~/.config/ngrok/ngrok.yml"')),(0,r.kt)("li",{parentName:"ul"},"MacOS (Darwin): ",(0,r.kt)("inlineCode",{parentName:"li"},'"~/Library/Application Support/ngrok/ngrok.yml"')),(0,r.kt)("li",{parentName:"ul"},"Windows: ",(0,r.kt)("inlineCode",{parentName:"li"},'"%HOMEPATH%\\AppData\\Local\\ngrok\\ngrok.yml"'))),(0,r.kt)("h2",{id:"global-options"},"Global Options"),(0,r.kt)("p",null,"The following is a list of options that can be configured at the root of your configuration file and specify the behavior of the agent."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#api_key"},"api_key")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies the ngrok API key used to connect to the ngrok API. This is only needed when using the ",(0,r.kt)("inlineCode",{parentName:"td"},"ngrok api")," command and should not be confused with the authtoken.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#authtoken"},"authtoken")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies the authentication token (authtoken) used to connect to the ngrok service.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#connect_timeout"},"connect_timeout")),(0,r.kt)("td",{parentName:"tr",align:null},"How long to wait when establishing an agent session connection to the ngrok service. The default is 10s.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#console_ui"},"console_ui")),(0,r.kt)("td",{parentName:"tr",align:null},"Enable/disable the console UI")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#console_ui_color"},"console_ui_color")),(0,r.kt)("td",{parentName:"tr",align:null},"Set the background color of the console UI")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#dns_resolver_ips"},"dns_resolver_ips")),(0,r.kt)("td",{parentName:"tr",align:null},"Consult these DNS servers for tunnel session DNS resolution.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#heartbeat_interval"},"heartbeat_interval")),(0,r.kt)("td",{parentName:"tr",align:null},"How often the ngrok agent should heartbeat to the ngrok servers defined as a duration. Default is 10s.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#heartbeat_tolerance"},"heartbeat_tolerance")),(0,r.kt)("td",{parentName:"tr",align:null},"Reconnect the agent tunnel session if the server does not respond to a heartbeat within this tolerance defined as a duration. Default is 15s.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#inspect_db_size"},"inspect_db_size")),(0,r.kt)("td",{parentName:"tr",align:null},"The size in bytes of the upper limit on memory to allocate to save requests over HTTP tunnels for inspection and replay.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#log_level"},"log_level")),(0,r.kt)("td",{parentName:"tr",align:null},"Logging level of detail. In increasing order of verbosity, possible values are:")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#log_format"},"log_format")),(0,r.kt)("td",{parentName:"tr",align:null},"Format of written log records.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#log"},"log")),(0,r.kt)("td",{parentName:"tr",align:null},"Write logs to this target destination.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#metadata"},"metadata")),(0,r.kt)("td",{parentName:"tr",align:null},"Opaque, user-supplied string that will be returned as part of the ngrok API response to the ",(0,r.kt)("a",{parentName:"td",href:"/api/resources/tunnel-sessions"},"list online sessions")," resource for all tunnels started by this agent.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#proxy_url"},"proxy_url")),(0,r.kt)("td",{parentName:"tr",align:null},"URL of an HTTP or SOCKS5 proxy to use for establishing the tunnel connection.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#region"},"region")),(0,r.kt)("td",{parentName:"tr",align:null},"Choose the region where the ngrok agent will connect to host its tunnels.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#remote_management"},"remote_management")),(0,r.kt)("td",{parentName:"tr",align:null},"Set this to ",(0,r.kt)("inlineCode",{parentName:"td"},"true")," to allow the ngrok agent to be remotely managed (stop, restart, update). Defaults to ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#root_cas"},"root_cas")),(0,r.kt)("td",{parentName:"tr",align:null},"The root certificate authorities used to validate the TLS connection to the ngrok server.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#server_addr"},"server_addr")),(0,r.kt)("td",{parentName:"tr",align:null},"This is the URL of the ngrok server to connect to. You should only set this if you are using a custom ingress URL.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#tunnels"},"tunnels")),(0,r.kt)("td",{parentName:"tr",align:null},"A map of names to tunnel definitions. See ",(0,r.kt)("a",{parentName:"td",href:"#tunnel-definitions"},"tunnel definitions")," for more details.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#update_channel"},"update_channel")),(0,r.kt)("td",{parentName:"tr",align:null},"The update channel determines the stability of released builds to update to. Use ",(0,r.kt)("inlineCode",{parentName:"td"},"stable")," for all production deployments.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#update_check"},"update_check")),(0,r.kt)("td",{parentName:"tr",align:null},"This tells the ngrok agent if it should check for updates. Defaults to ",(0,r.kt)("inlineCode",{parentName:"td"},"true"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#version"},"version")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies the version of the config file to use.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#web_addr"},"web_addr")),(0,r.kt)("td",{parentName:"tr",align:null},"Network address to bind on for serving the local web interface and api.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"#web_allow_hosts"},"web_allow_hosts")),(0,r.kt)("td",{parentName:"tr",align:null},"Host headers to allow access for on the local web interface and api, can be a combination of IP's, CIDR ranges, and/or hostname suffixes.")))),(0,r.kt)("h3",{id:"api_key"},(0,r.kt)("inlineCode",{parentName:"h3"},"api_key")),(0,r.kt)("p",null,"This option specifies the API key used to access the ngrok API through the ",(0,r.kt)("a",{parentName:"p",href:"/secure-tunnels/ngrok-agent/reference/ngrok#ngrok-api"},(0,r.kt)("inlineCode",{parentName:"a"},"ngrok api"))," command. This is only needed when using the ",(0,r.kt)("a",{parentName:"p",href:"/api"},"ngrok API")," and not the local ngrok agent API (available at ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost:4040/api"),"). You can generate an API Key in the ",(0,r.kt)("a",{parentName:"p",href:"https://dashboard.ngrok.com/api"},"ngrok Dashboard")," and install it using the ",(0,r.kt)("inlineCode",{parentName:"p"},"ngrok config add-api-key")," command."),(0,r.kt)("h5",{id:"ngrokyml-specifying-an-api-key"},"ngrok.yml specifying an API key"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"api_key: 24yRd5U3DestCQapJrrVHLOqiAC_7RviwRqpd3wc9dKLujQZN\n")),(0,r.kt)("h3",{id:"authtoken"},(0,r.kt)("inlineCode",{parentName:"h3"},"authtoken")),(0,r.kt)("p",null,"This option specifies the authentication token (sometimes called tunnel credential) used to authenticate this agent when it connects to the ngrok service. After you've created an ngrok account, your dashboard will display the authtoken assigned to your account."),(0,r.kt)("p",null,"Your authtoken will work on multiple machines if you are just developing. When you want to deploy many agents on many devices, you can generate a unique authtoken for each device in the ngrok Dashboard or via the ",(0,r.kt)("inlineCode",{parentName:"p"},"ngrok api credentials")," command."),(0,r.kt)("h5",{id:"ngrokyml-specifying-an-authtoken"},"ngrok.yml specifying an authtoken"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"authtoken: 4nq9771bPxe8ctg7LKr_2ClH7Y15Zqe4bWLWF9p\n")),(0,r.kt)("h3",{id:"connect_timeout"},(0,r.kt)("inlineCode",{parentName:"h3"},"connect_timeout")),(0,r.kt)("p",null,"How long to wait when establishing an agent session connection to the ngrok service. This is specified as a duration, with the default being 10s."),(0,r.kt)("h3",{id:"console_ui"},(0,r.kt)("inlineCode",{parentName:"h3"},"console_ui")),(0,r.kt)("p",null,"This option allows you to enable or disable the console UI that is displayed in your terminal window after starting ngrok."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Enable the console UI")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Disable the console UI")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"iftty")),(0,r.kt)("td",{parentName:"tr",align:null},"default"),(0,r.kt)("td",{parentName:"tr",align:null},"Enable the UI only if standard out is a TTY (not a file or pipe)")))),(0,r.kt)("h3",{id:"console_ui_color"},(0,r.kt)("inlineCode",{parentName:"h3"},"console_ui_color")),(0,r.kt)("p",null,"The command sets the background color when displaying the console UI in the terminal. To choose a color other than black, set the value to transparent and change the background of your terminal window."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"transparent")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Don't set a background color when displaying the console UI")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"black")),(0,r.kt)("td",{parentName:"tr",align:null},"default"),(0,r.kt)("td",{parentName:"tr",align:null},"Set the console UI's background to black")))),(0,r.kt)("h3",{id:"dns_resolver_ips"},(0,r.kt)("inlineCode",{parentName:"h3"},"dns_resolver_ips")),(0,r.kt)("p",null,"Consult these DNS servers for tunnel session DNS resolution. By default, the ngrok agent will use the local system DNS servers to resolve."),(0,r.kt)("h3",{id:"heartbeat_interval"},(0,r.kt)("inlineCode",{parentName:"h3"},"heartbeat_interval")),(0,r.kt)("p",null,"How often the ngrok agent should heartbeat to the ngrok servers defined as a duration. The default is 10s."),(0,r.kt)("h3",{id:"heartbeat_tolerance"},(0,r.kt)("inlineCode",{parentName:"h3"},"heartbeat_tolerance")),(0,r.kt)("p",null,"Reconnect the agent tunnel session if the server does not respond to a heartbeat within this tolerance defined as a duration. The default is 15s."),(0,r.kt)("h3",{id:"inspect_db_size"},(0,r.kt)("inlineCode",{parentName:"h3"},"inspect_db_size")),(0,r.kt)("p",null,"This is the upper limit in bytes on memory to allocate when saving requests over HTTP tunnels for inspection and reply. The default is 0, which means 50MB."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"positive integers"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"size in bytes of the upper limit on memory to allocate to save requests over HTTP tunnels for inspection and replay.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"0")),(0,r.kt)("td",{parentName:"tr",align:null},"default"),(0,r.kt)("td",{parentName:"tr",align:null},"use the default allocation limit, 50MB")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"-1")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"disable the inspection database; this has the effective behavior of disabling inspection for all tunnels")))),(0,r.kt)("h3",{id:"log_level"},(0,r.kt)("inlineCode",{parentName:"h3"},"log_level")),(0,r.kt)("p",null,"This is the logging level of detail. In increasing order of verbosity, possible values are: ",(0,r.kt)("inlineCode",{parentName:"p"},"crit"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"warn"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"error"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"info"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"debug"),"."),(0,r.kt)("h3",{id:"log_format"},(0,r.kt)("inlineCode",{parentName:"h3"},"log_format")),(0,r.kt)("p",null,"This is the format of written log records."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"logfmt")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"human and machine friendly key/value pairs")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"json")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"newline-separated JSON objects")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"term")),(0,r.kt)("td",{parentName:"tr",align:null},"default"),(0,r.kt)("td",{parentName:"tr",align:null},"custom colored human format if standard out is a TTY, otherwise same as ",(0,r.kt)("inlineCode",{parentName:"td"},"logfmt"))))),(0,r.kt)("h3",{id:"log"},(0,r.kt)("inlineCode",{parentName:"h3"},"log")),(0,r.kt)("p",null,"This is the destination where ngrok should write the logs."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"stdout")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"write to standard out")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"stderr")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"write to standard error")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false")),(0,r.kt)("td",{parentName:"tr",align:null},"default"),(0,r.kt)("td",{parentName:"tr",align:null},"disable logging")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"other values"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"write log records to file path on disk")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"log: /var/log/ngrok.log\n")),(0,r.kt)("h3",{id:"metadata"},(0,r.kt)("inlineCode",{parentName:"h3"},"metadata")),(0,r.kt)("p",null,"This is a user-supplied custom string that will be returned as part of the ngrok API response to the ",(0,r.kt)("a",{parentName:"p",href:"/api/resources/tunnel-sessions"},"list online sessions resource")," for all tunnels started by this agent. This is a useful mechanism to identify tunnels by your own device or customer identifier. Maximum 4096 characters."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"metadata: bad8c1c0-8fce-11e4-b4a9-0800200c9a66\n")),(0,r.kt)("h3",{id:"proxy_url"},(0,r.kt)("inlineCode",{parentName:"h3"},"proxy_url")),(0,r.kt)("p",null,"This is the URL of an HTTP or SOCKS5 proxy to use for establishing the tunnel connection. Many HTTP proxies have connection size and duration limits that will cause ngrok to fail. Like many other networking tools, ngrok will also respect the environment variable ",(0,r.kt)("inlineCode",{parentName:"p"},"http_proxy")," if it is set."),(0,r.kt)("h3",{id:"region"},(0,r.kt)("inlineCode",{parentName:"h3"},"region")),(0,r.kt)("p",null,"This is the region where the ngrok agent will connect to. You can only choose one region per agent session. Choosing the region closest to you usually improves latency and performance. By default, the ngrok agent attempts to choose the best region for you."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Region Code"),(0,r.kt)("th",{parentName:"tr",align:null},"Region Name"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"us")),(0,r.kt)("td",{parentName:"tr",align:null},"United States")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"eu")),(0,r.kt)("td",{parentName:"tr",align:null},"Europe")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ap")),(0,r.kt)("td",{parentName:"tr",align:null},"Asia/Pacific")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"au")),(0,r.kt)("td",{parentName:"tr",align:null},"Australia")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"sa")),(0,r.kt)("td",{parentName:"tr",align:null},"South America")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"jp")),(0,r.kt)("td",{parentName:"tr",align:null},"Japan")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"in")),(0,r.kt)("td",{parentName:"tr",align:null},"India")))),(0,r.kt)("h3",{id:"remote_management"},(0,r.kt)("inlineCode",{parentName:"h3"},"remote_management")),(0,r.kt)("p",null,"Set this to ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," to allow the ngrok agent to be remotely managed (stop, restart, update) via the ",(0,r.kt)("a",{parentName:"p",href:"/api/resources/tunnel-sessions#restart-tunnel-agent"},"ngrok API")," or the ",(0,r.kt)("a",{parentName:"p",href:"https://dashboard.ngrok.com/tunnels/agents"},"ngrok Dashboard"),". Defaults to ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,r.kt)("h3",{id:"root_cas"},(0,r.kt)("inlineCode",{parentName:"h3"},"root_cas")),(0,r.kt)("p",null,"This is the root certificate authorities used to validate the TLS connection to the ngrok server."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"trusted")),(0,r.kt)("td",{parentName:"tr",align:null},"default"),(0,r.kt)("td",{parentName:"tr",align:null},"use only the trusted certificate root for the ngrok.com tunnel service")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"host")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"use the root certificates trusted by the host's operating system. This is helpful for working with machine-in-the-middle (MITM) proxies doing deep packet inspection (DPI).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"other values"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"path to a certificate PEM file on disk with certificate authorities to trust")))),(0,r.kt)("h3",{id:"server_addr"},(0,r.kt)("inlineCode",{parentName:"h3"},"server_addr")),(0,r.kt)("p",null,"This is the URL of the ngrok server to connect to. You should set this if you are using a custom ingress URL."),(0,r.kt)("h3",{id:"tunnels"},(0,r.kt)("inlineCode",{parentName:"h3"},"tunnels")),(0,r.kt)("p",null,"This is a map of names to tunnel definitions. See ",(0,r.kt)("a",{parentName:"p",href:"#tunnel-definitions"},"tunnel definitions")," for more details."),(0,r.kt)("h3",{id:"update_channel"},(0,r.kt)("inlineCode",{parentName:"h3"},"update_channel")),(0,r.kt)("p",null,"The update channel determines the stability of released builds to update to. Use 'stable' for all production deployments."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"stable")),(0,r.kt)("td",{parentName:"tr",align:null},"default"),(0,r.kt)("td",{parentName:"tr",align:null},"These are builds that are ready to be used in production.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"unstable")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"update to new nightly builds when available which could be broken. This should not be used in production.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"beta")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"update to new beta builds when available which could be broken. This should not be used in production.")))),(0,r.kt)("h3",{id:"update_check"},(0,r.kt)("inlineCode",{parentName:"h3"},"update_check")),(0,r.kt)("p",null,"This tells the ngrok agent if it should check for updates. Defaults to ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,r.kt)("h3",{id:"version"},(0,r.kt)("inlineCode",{parentName:"h3"},"version")),(0,r.kt)("p",null,"Specifies the version of the config file to use."),(0,r.kt)("h3",{id:"web_addr"},(0,r.kt)("inlineCode",{parentName:"h3"},"web_addr")),(0,r.kt)("p",null,"This is the network address to bind on for serving the local agent web interface and API."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Network address"),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null},"Bind to this network address"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"127.0.0.1:4040")),(0,r.kt)("td",{parentName:"tr",align:null},"default"),(0,r.kt)("td",{parentName:"tr",align:null},"default network address")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false")),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"disable the web UI")))),(0,r.kt)("h3",{id:"web_allow_hosts"},(0,r.kt)("inlineCode",{parentName:"h3"},"web_allow_hosts")),(0,r.kt)("p",null,"These are a list of specifiers for what Host headers will be allowed to make requests agains the local agent web interface and API. Any port is stripped off the Host header before matching is performed."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Allow string"),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null},"Example Host headers that would match"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"default"),(0,r.kt)("td",{parentName:"tr",align:null},"requests to localhost-bound web interface or API endpoints are checked to have a localhost-like Host (localhost, 127.0.0.1, ::1, etc.)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"8.8.8.8"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"an IP matches Host header (8.8.8.8)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1:2:3:4:5:6:7:8"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"an IPv6 matches Host header (1:2:3:4:5:6:7:8)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"10.0.0.0/8"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"a CIDR range matches a Host header that is an IP address in that range (10.0.0.1 or 10.1.2.3)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1:2:3:4:5:6:7:8/16"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"a CIDR range matches a Host header that is an IPv6 address in that range (1:2:3:4:5:6:7:0)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"example.com"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"a hostname without preceding period will match Host header exactly (example.com)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},".example.com"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"a hostname with a preceding period Host header suffix (sub.example.com or foo.example.com)")))),(0,r.kt)("h5",{id:"allow-an-ip-address-and-a-domain-as-host-headers"},"Allow an IP address and a Domain as Host headers"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"web_allow_hosts:\n  - 8.8.8.8\n  - example.com\n")),(0,r.kt)("h2",{id:"tunnel-definitions"},"Tunnel definitions"),(0,r.kt)("p",null,"The most common use of the configuration file is to define tunnel configurations. Defining tunnel configurations is useful because you may then start pre-configured tunnels by name from your command line without remembering all of the right arguments every time. You may also use this method to start as many tunnels as you like from a single ngrok agent."),(0,r.kt)("p",null,"Tunnels are defined as mapping of name -> configuration under the ",(0,r.kt)("inlineCode",{parentName:"p"},"tunnels")," property in your configuration file."),(0,r.kt)("h5",{id:"define-two-tunnels-named-httpbin-and-demo"},"Define two tunnels named 'httpbin' and 'demo'"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"tunnels:\n  httpbin:\n    proto: http\n    addr: 8000\n    domain: alan-httpbin.ngrok.dev\n  demo:\n    proto: http\n    addr: 9090\n    domain: demo.inconshreveable.com\n    inspect: false\n")),(0,r.kt)("h5",{id:"start-the-tunnel-named-httpbin"},"Start the tunnel named 'httpbin'"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ngrok start httpbin\n")),(0,r.kt)("p",null,"Each tunnel you define is a map of configuration option names to values. The name of a configuration option is usually the same as its corresponding command line switch with hyphens (",(0,r.kt)("inlineCode",{parentName:"p"},"--host-header")," becomes ",(0,r.kt)("inlineCode",{parentName:"p"},"host_header:")," in the configuration file and ",(0,r.kt)("inlineCode",{parentName:"p"},"--scheme")," becomes ",(0,r.kt)("inlineCode",{parentName:"p"},"schemes"),". Tunnels can define a specific ",(0,r.kt)("inlineCode",{parentName:"p"},"proto")," or use labels to dynamically connect to one or more matching ngrok Edges. All tunnels must define a specific ",(0,r.kt)("inlineCode",{parentName:"p"},"addr")," that tells the agent where to send the traffic. Other properties are available and many are protocol-specific."),(0,r.kt)("h5",{id:"common-tunnel-configuration-properties"},"Common Tunnel Configuration Properties"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"addr")),(0,r.kt)("td",{parentName:"tr",align:null},"required"),(0,r.kt)("td",{parentName:"tr",align:null},"forward traffic to this local port number or network address. This can be just a port (")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"metadata")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional"),(0,r.kt)("td",{parentName:"tr",align:null},"arbitrary user-defined metadata that will appear in the ngrok service API when listing tunnel sessions")))),(0,r.kt)("h5",{id:"http-tunnel-configuration-properties"},"HTTP Tunnel Configuration Properties"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"basic_auth")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of ",(0,r.kt)("inlineCode",{parentName:"td"},"username:password")," Strings"),(0,r.kt)("td",{parentName:"tr",align:null},"This is a list of username:password combinations to use for basic authenticate. Passwords must be at least 8 characters long.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"circuit_breaker")),(0,r.kt)("td",{parentName:"tr",align:null},"Float"),(0,r.kt)("td",{parentName:"tr",align:null},"Reject requests when 5XX responses exceed this ratio")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"compression")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"false")),(0,r.kt)("td",{parentName:"tr",align:null},"gzip compress HTTP responses from your web service")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"host_header")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"rewrite"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"preserve"),", custom"),(0,r.kt)("td",{parentName:"tr",align:null},"Rewrite the HTTP Host header to this value, or ",(0,r.kt)("inlineCode",{parentName:"td"},"preserve")," to leave it unchanged. The ",(0,r.kt)("inlineCode",{parentName:"td"},"rewrite")," option will rewrite the host header to match the hostname of the upstream service you are sending traffic to.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"domain")),(0,r.kt)("td",{parentName:"tr",align:null},"Any valid domain or hostname that you have previously registered with ngrok."),(0,r.kt)("td",{parentName:"tr",align:null},"The domain to request. If using a custom domain, this requires registering in the ",(0,r.kt)("a",{parentName:"td",href:"https://dashboard.ngrok.com/cloud-edge/domains"},"ngrok dashboard")," and setting a DNS CNAME value. When using wildcard domains you will need to surround the value with single quotes (domain: '","*",".example.com').")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"inspect")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"false")),(0,r.kt)("td",{parentName:"tr",align:null},"enable/disable the http request inspection in the web and agent API (default: true)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ip_restriction.allow_cidrs")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of CIDRs"),(0,r.kt)("td",{parentName:"tr",align:null},"Rejects connections that do not match the given CIDRs")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ip_restriction.deny_cidrs")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of CIDRs"),(0,r.kt)("td",{parentName:"tr",align:null},"Rejects connections that match the given CIDRs and allows all other CIDRs.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"mutual_tls_cas")),(0,r.kt)("td",{parentName:"tr",align:null},"Valid system path"),(0,r.kt)("td",{parentName:"tr",align:null},"The path to the TLS certificate authority to verify client certs in mutual TLS")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"oauth.allow_domains")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of Strings"),(0,r.kt)("td",{parentName:"tr",align:null},"Allow only OAuth2 users with these email domains")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"oauth.allow_emails")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of Strings"),(0,r.kt)("td",{parentName:"tr",align:null},"Allow only OAuth users with these emails")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"oauth.oauth_scopes")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of Strings"),(0,r.kt)("td",{parentName:"tr",align:null},"Request these OAuth2 scopes when a user authenticates")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"oauth.provider")),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"enforce authentication OAuth2 provider on the endpoint, e.g. 'google'. For a lit of available providers, see ",(0,r.kt)("a",{parentName:"td",href:"/cloud-edge/modules/oauth/"},"OAuth2 providers"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"proto")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"http")),(0,r.kt)("td",{parentName:"tr",align:null},"The tunnel protocol name. This defines the type of tunnel you would like to start.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"proxy_proto")),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"The version of ",(0,r.kt)("a",{parentName:"td",href:"https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt"},"PROXY protocol")," to use with this tunnel, empty if not using. Example values are 1 or 2.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"request_header.add")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of ",(0,r.kt)("inlineCode",{parentName:"td"},"key:value")," Strings"),(0,r.kt)("td",{parentName:"tr",align:null},"The headers to add to the request in the key:value format.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"request_header.remove")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of Strings"),(0,r.kt)("td",{parentName:"tr",align:null},"The header keys to remove from the request.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"response_header.add")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of Strings"),(0,r.kt)("td",{parentName:"tr",align:null},"The headers to add to the response in the key:value format.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"response_header.remove")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of Strings"),(0,r.kt)("td",{parentName:"tr",align:null},"The header keys to remove from the response.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"schemes")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"http"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"https")),(0,r.kt)("td",{parentName:"tr",align:null},"bind to an HTTPS endpoint (")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"subdomain")),(0,r.kt)("td",{parentName:"tr",align:null},"Any valid combination of letters, numbers, hyphens or periods."),(0,r.kt)("td",{parentName:"tr",align:null},"subdomain name to request. If unspecified, ngrok provides a unique subdomain based on your account type.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ua_filter_allow")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of Strings"),(0,r.kt)("td",{parentName:"tr",align:null},"Allow User-Agents that can be matched against these regex")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ua_filter_deny")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of Strings"),(0,r.kt)("td",{parentName:"tr",align:null},"Deny User-Agents that can be matched against these regex")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"verify_webhook.provider")),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"Verify webhooks are signed by this provider, e.g. 'slack'. For a full list of providers, see ",(0,r.kt)("a",{parentName:"td",href:"/cloud-edge/modules/webhook-verification"},"Webhook Verification Providers"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"verify_webhook.secret")),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"The secret used by provider to sign webhooks, if there is one")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"websocket_tcp_converter")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"false")),(0,r.kt)("td",{parentName:"tr",align:null},"Convert ingress websocket connections to TCP upstream")))),(0,r.kt)("h5",{id:"tcp-tunnel-configuration-properties"},"TCP Tunnel Configuration Properties"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ip_restriction.allow_cidrs")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of CIDRs"),(0,r.kt)("td",{parentName:"tr",align:null},"Rejects connections that do not match the given CIDRs")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ip_restriction.deny_cidrs")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of CIDRs"),(0,r.kt)("td",{parentName:"tr",align:null},"Rejects connections that match the given CIDRs and allows all other CIDRs.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"proto")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tcp")),(0,r.kt)("td",{parentName:"tr",align:null},"The tunnel protocol name. This defines the type of tunnel you would like to start.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"proxy_proto")),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"The version of ",(0,r.kt)("a",{parentName:"td",href:"https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt"},"PROXY protocol")," to use with this tunnel, empty if not using. Example values are 1 or 2.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"remote_addr")),(0,r.kt)("td",{parentName:"tr",align:null},"A valid TCP address from ngrok"),(0,r.kt)("td",{parentName:"tr",align:null},"bind the remote TCP address and port. These addresses can be reserved in the ",(0,r.kt)("a",{parentName:"td",href:"https://dashboard.ngrok.com/cloud-edge/tcp-addresses"},"ngrok dashboard")," to use across sessions. For example: ",(0,r.kt)("inlineCode",{parentName:"td"},"remote_addr: 2.tcp.ngrok.io:21746"))))),(0,r.kt)("h5",{id:"tls-tunnel-configuration-properties"},"TLS Tunnel Configuration Properties"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"mutual_tls_cas")),(0,r.kt)("td",{parentName:"tr",align:null},"Valid system path"),(0,r.kt)("td",{parentName:"tr",align:null},"The path to the TLS certificate authority to verify client certs for mutual TLS. You will also need to specify ",(0,r.kt)("inlineCode",{parentName:"td"},"key")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"crt")," to enable mutual TLS.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"crt")),(0,r.kt)("td",{parentName:"tr",align:null},"Valid system path"),(0,r.kt)("td",{parentName:"tr",align:null},"PEM TLS certificate at this path to terminate TLS traffic before forwarding locally. Requires ",(0,r.kt)("inlineCode",{parentName:"td"},"--key")," to also be specified.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"domain")),(0,r.kt)("td",{parentName:"tr",align:null},"Any valid domain or hostname that you have previously registered with ngrok."),(0,r.kt)("td",{parentName:"tr",align:null},"The domain to request. If using a custom domain, this requires registering in the ngrok Dashboard and setting a DNS CNAME value. When using wildcard domains you will need to surround the value with single quotes (domain: '","*",".example.com').")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ip_restriction.allow_cidrs")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of CIDRs"),(0,r.kt)("td",{parentName:"tr",align:null},"Rejects connections that do not match the given CIDRs")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ip_restriction.deny_cidrs")),(0,r.kt)("td",{parentName:"tr",align:null},"Array of CIDRs"),(0,r.kt)("td",{parentName:"tr",align:null},"Rejects connections that match the given CIDRs and allows all other CIDRs.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"key")),(0,r.kt)("td",{parentName:"tr",align:null},"Valid system path"),(0,r.kt)("td",{parentName:"tr",align:null},"PEM TLS private key at this path to terminate TLS traffic before forwarding locally. Requires ",(0,r.kt)("inlineCode",{parentName:"td"},"--crt")," to also be specified.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"proto")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"tls")),(0,r.kt)("td",{parentName:"tr",align:null},"The tunnel protocol name. This defines the type of tunnel you would like to start.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"proxy_proto")),(0,r.kt)("td",{parentName:"tr",align:null},"String"),(0,r.kt)("td",{parentName:"tr",align:null},"The version of ",(0,r.kt)("a",{parentName:"td",href:"https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt"},"PROXY protocol")," to use with this tunnel, empty if not using. Example values are 1 or 2.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"subdomain")),(0,r.kt)("td",{parentName:"tr",align:null},"Any valid combination of letters, numbers, hyphens or periods."),(0,r.kt)("td",{parentName:"tr",align:null},"subdomain name to request. If unspecified, ngrok provides a unique subdomain based on your account type.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"terminate_at")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"edge")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"agent")),(0,r.kt)("td",{parentName:"tr",align:null},'Terminate at the ngrok "edge" or "agent". defaults to no termination or "edge" if ',(0,r.kt)("inlineCode",{parentName:"td"},"--crt")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"--key")," are present")))),(0,r.kt)("h5",{id:"labeled-tunnel-configuration-properties"},"Labeled Tunnel Configuration Properties"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"crt")),(0,r.kt)("td",{parentName:"tr",align:null},"Valid system path"),(0,r.kt)("td",{parentName:"tr",align:null},"The path to a TLS certificate when doing TLS termination at the agent.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"inspect")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"false")),(0,r.kt)("td",{parentName:"tr",align:null},"enable/disable the http request inspection in the web and agent API (default: true)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"key")),(0,r.kt)("td",{parentName:"tr",align:null},"Valid system path"),(0,r.kt)("td",{parentName:"tr",align:null},"The path to a TLS key when doing TLS termination at the agent.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"labels")),(0,r.kt)("td",{parentName:"tr",align:null},"A list of labels (name=value) that can be used to identify a tunnel to an ngrok Edge (specifically a tunnel group backend)."),(0,r.kt)("td",{parentName:"tr",align:null},"The labels for this tunnel in the format name=value.")))),(0,r.kt)("h5",{id:"define-two-labeled-tunnels"},"Define two labeled tunnels"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"tunnels:\n  my-cool-website:\n    labels:\n      - env=prod\n      - team=infra\n    addr: 8000\n    inspect: false\n  ssh-tunnel:\n    labels:\n      - hostname=my-hostname\n      - service=ssh\n      - team=development\n    addr: 22\n")),(0,r.kt)("h2",{id:"how-config-files-get-merged"},"How Config Files get Merged"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"--config")," flag in the ",(0,r.kt)("inlineCode",{parentName:"p"},"ngrok")," command allows you to specify one or more ngrok configuration files to merge when starting the ngrok agent. The rules for merging are as follows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Values from later configs override those from earlier configs. For example, if config1.yml and config2.yml both set ",(0,r.kt)("inlineCode",{parentName:"li"},"api_key"),", then calling ",(0,r.kt)("inlineCode",{parentName:"li"},"ngrok http --config config1.yml,config2.yml 80")," will use the ",(0,r.kt)("inlineCode",{parentName:"li"},"api_key")," from config2.yml."),(0,r.kt)("li",{parentName:"ul"},"Lists are overwritten using the last value."),(0,r.kt)("li",{parentName:"ul"},"Maps, including the ",(0,r.kt)("inlineCode",{parentName:"li"},"tunnels")," map, are merged by key and in the case of a duplicate key, the latter value is taken.")),(0,r.kt)("h2",{id:"full-example"},"Full Example"),(0,r.kt)("p",null,"Below is an example configuration file with all the options filled in."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'authtoken: 4nq9771bPxe8ctg7LKr_2ClH7Y15Zqe4bWLWF9p\napi_key: 24yRd5U3DestCQapJrrVHLOqiAC_7RviwRqpd3wc9dKLujQZN\nconnect_timeout: 30s\nconsole_ui: true\nconsole_ui_color: transparent\ndns_resolver_ips:\n  - 1.1.1.1\n  - 8.8.8.8\nheartbeat_interval: 1m\nheartbeat_tolerance: 5s\ninspect_db_size: 104857600 # 100mb\ninspect_db_size: 50000000\nlog_level: info\nlog_format: json\nlog: /var/log/ngrok.log\nmetadata: \'{"serial": "00012xa-33rUtz9", "comment": "For customer alan@example.com"}\'\nproxy_url: socks5://localhost:9150\nregion: us\nremote_management: false\nroot_cas: trusted\nupdate_channel: stable\nupdate_check: false\nversion: 2\nweb_addr: localhost:4040\ntunnels:\n  website:\n    addr: 8888\n    basic_auth:\n      - "bob:bobpassword"\n    schemes:\n      - https\n    host_header: "myapp.ngrok.dev"\n    inspect: false\n    proto: http\n    domain: myapp.ngrok.dev\n\n  e2etls:\n    addr: 9000\n    proto: tls\n    domain: myapp.example.com\n    crt: example.crt\n    key: example.key\n\n  iprestriction:\n    ip_restriction:\n      allow_cidrs:\n        - 1.1.1.1/32\n    addr: 8000\n    proto: tcp\n\n  ssh-access:\n    addr: 22\n    proto: tcp\n    remote_addr: 1.tcp.ngrok.io:12345\n\n  my-cool-website:\n    labels:\n      - env=prod\n      - team=infra\n    addr: 8000\n    oauth:\n      provider: google\n    inspect: false\n')))}u.isMDXComponent=!0}}]);